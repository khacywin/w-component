{"version":3,"file":"index.js","sources":["../../components/Calendar/index.tsx"],"sourcesContent":["import {\r\n  CalendarDate,\r\n  CalendarHead,\r\n  CalendarTop,\r\n  CalendarWrap,\r\n} from './_style';\r\nimport React, {\r\n  SyntheticEvent,\r\n  useCallback,\r\n  useEffect,\r\n  useMemo,\r\n  useState,\r\n} from 'react';\r\n\r\nimport ButtonAction from 'components/Button/ButtonAction';\r\nimport Icon from 'components/Icon';\r\nimport wdate from 'w-date';\r\n\r\nexport interface IDateProps {\r\n  noSelect?: boolean;\r\n  selected?: any;\r\n  period?: 'all' | 'year' | 'month' | 'week' | 'date';\r\n  fnSelected?: (date: Date) => void;\r\n  disableItem?: (date: any) => boolean;\r\n}\r\n\r\n/**\r\n * Calendar component\r\n * @prop {date object | string format date} selected\r\n * @prop {function} fnSelected - params of function is {array[MM, DD, YYYY]}\r\n */\r\nexport default React.memo(\r\n  ({\r\n    selected,\r\n    fnSelected,\r\n    period = 'date',\r\n    noSelect = false,\r\n    disableItem\r\n  }: IDateProps) => {\r\n    const now: any = useMemo(() => new Date(), []);\r\n    const [month, setMonth] = useState(now.getMonth()); // Use format 0-11\r\n    const [year, setYear] = useState(now.getFullYear());\r\n\r\n    // Date selected\r\n    const [dateSelected, setDateSelected] = useState(\r\n      selected ? wdate.identifyDate(selected) : new Date()\r\n    );\r\n\r\n    /**\r\n     * @param {event} e\r\n     */\r\n    const selectDate = useCallback(\r\n      (e: SyntheticEvent<HTMLTableCellElement>) => {\r\n        if (!noSelect) {\r\n          let date_selected: any = e.currentTarget\r\n            ? e.currentTarget.getAttribute('data-date')\r\n            : e; // Format : MM-DD-YYYY;\r\n          date_selected = wdate.identifyDate(date_selected);\r\n\r\n          if (fnSelected) {\r\n            fnSelected(date_selected);\r\n          }\r\n\r\n          if (date_selected.getMonth() !== month) {\r\n            setMonth(date_selected.getMonth());\r\n            setYear(date_selected.getFullYear());\r\n          }\r\n          setDateSelected(date_selected);\r\n        }\r\n      },\r\n      [fnSelected, month, noSelect]\r\n    );\r\n\r\n    const checkedSelectedDateFollowPeriod = useCallback(\r\n      (index: number, month: number, year: number) => {\r\n        let checked = false;\r\n        const _dateSelected = dateSelected;\r\n        switch (period) {\r\n          case 'week':\r\n            checked =\r\n              wdate.getWeek(_dateSelected) ===\r\n              wdate.getWeek(`${month + 1}-${index}-${year}`);\r\n            break;\r\n\r\n          case 'month':\r\n            checked = _dateSelected.getMonth() === month;\r\n            break;\r\n\r\n          default:\r\n            checked =\r\n              index === _dateSelected.getDate() &&\r\n              month === _dateSelected.getMonth() &&\r\n              year === _dateSelected.getFullYear();\r\n            break;\r\n        }\r\n\r\n        return checked;\r\n      },\r\n      [period, dateSelected]\r\n    );\r\n\r\n    /**\r\n     * Create array date of\r\n     */\r\n    const pushIntoArray = useCallback(() => {\r\n      const select = new Date();\r\n      select.setMonth(month);\r\n      select.setFullYear(year);\r\n\r\n      const numberOfDates: number = wdate.amountDateInMonth(month + 1, year),\r\n        firstDay: number = wdate.firstWeekdayInMonth(select),\r\n        html: any[] = [];\r\n\r\n      let index = 1,\r\n        indexNext = 1,\r\n        indexPrev: number = wdate.numberOfDays(wdate.previousMonth(select)) - firstDay + 1;\r\n      for (let row = 0; row < 7; row++) {\r\n        for (let col = 0; col < 6; col++) {\r\n          /**\r\n           * TODO Print dates in last month\r\n           * Check where first date in month and print dates in last month\r\n           */\r\n          if (row === 0 && col < firstDay) {\r\n            const _dateString = `${month === 0 ? 12 : month}-${indexPrev}-${month === 0 ? year - 1 : year}`;\r\n\r\n            html.push(\r\n              <CalendarDate\r\n                className={\r\n                  checkedSelectedDateFollowPeriod(\r\n                    indexPrev,\r\n                    month === 0 ? 11 : month - 1,\r\n                    month === 0 ? year - 1 : year\r\n                  )\r\n                    ? 'selected'\r\n                    : ''\r\n                }\r\n                onClick={selectDate}\r\n                data-date={_dateString}\r\n                key={7 * row + col}\r\n                notInMonth\r\n                disable={disableItem?.(_dateString)}\r\n              >\r\n                <li>{indexPrev++}</li>\r\n              </CalendarDate>\r\n            );\r\n          }\r\n          /**\r\n           * TODO Print dates in next month\r\n           * Check where index is bigger number of date\r\n           */\r\n          else if (row > 0 && index > numberOfDates) {\r\n            const _dateStr = `${month === 11 ? 1 : month + 2}-${indexNext}-${month === 11 ? year + 1 : year}`;\r\n            html.push(\r\n              <CalendarDate\r\n                className={\r\n                  checkedSelectedDateFollowPeriod(\r\n                    indexNext,\r\n                    month === 11 ? 0 : month + 1,\r\n                    month === 11 ? year + 1 : year\r\n                  )\r\n                    ? 'selected'\r\n                    : ''\r\n                }\r\n                onClick={selectDate}\r\n                data-date={_dateStr}\r\n                key={7 * row + col}\r\n                notInMonth\r\n                disable={disableItem?.(_dateStr)}\r\n              >\r\n                <li>{indexNext++}</li>\r\n              </CalendarDate>\r\n            );\r\n          }\r\n          /**\r\n           * TODO Print date was selected\r\n           */\r\n          else {\r\n            const _dateStr = `${month + 1}-${index}-${year}`\r\n            html.push(\r\n              <CalendarDate\r\n                className={\r\n                  checkedSelectedDateFollowPeriod(index, month, year)\r\n                    ? 'selected'\r\n                    : ''\r\n                }\r\n                now={\r\n                  index === now.getDate() &&\r\n                  month === now.getMonth() &&\r\n                  year === now.getFullYear()\r\n                }\r\n                data-date={_dateStr}\r\n                onClick={selectDate}\r\n                key={7 * row + col}\r\n                disable={disableItem?.(_dateStr)}\r\n              >\r\n                <li>{index++}</li>\r\n              </CalendarDate>\r\n            );\r\n          }\r\n        }\r\n      }\r\n      return html;\r\n    }, [month, year, checkedSelectedDateFollowPeriod, selectDate, now, disableItem]);\r\n\r\n    /**\r\n     * Divide list html date to two-dimensional array\r\n     */\r\n    const divideArrayToCalendar = useCallback((arr: any[]) => {\r\n      let cols: any[] = [];\r\n      const rows: any[] = [];\r\n      arr.forEach((date, key) => {\r\n        if (key % 7 === 6) {\r\n          cols.push(date);\r\n          rows.push(cols);\r\n          cols = [];\r\n        } else cols.push(date);\r\n      });\r\n\r\n      return rows.map((row, key) => <tr key={key}>{row}</tr>);\r\n    }, []);\r\n\r\n    // Next month\r\n    const nextMonth = useCallback(() => {\r\n      if (month === 11) {\r\n        setYear((year: number) => year + 1);\r\n        setMonth(0);\r\n      } else setMonth(month + 1);\r\n    }, [month]);\r\n\r\n    // Previous month\r\n    const previousMonth = useCallback(() => {\r\n      if (month === 0) {\r\n        setYear((year: number) => year - 1);\r\n        setMonth(11);\r\n      } else setMonth(month - 1);\r\n    }, [month]);\r\n\r\n    useEffect(() => {\r\n      // Set date when selected change\r\n      const _date = selected ? wdate.identifyDate(selected) : new Date();\r\n      setDateSelected(_date);\r\n    }, [selected]);\r\n\r\n    return (\r\n      <CalendarWrap noSelect={noSelect}>\r\n        <CalendarTop>\r\n          <tr>\r\n            <th colSpan={5}>\r\n              {wdate.getMonthFull(month)},{year}\r\n            </th>\r\n            <th>\r\n              <ButtonAction label='Previous' action={previousMonth}>\r\n                <Icon icon='i-arrow-left' />\r\n              </ButtonAction>\r\n            </th>\r\n            <th>\r\n              <ButtonAction label='Next' action={nextMonth}>\r\n                <Icon icon='i-arrow-right' />\r\n              </ButtonAction>\r\n            </th>\r\n          </tr>\r\n        </CalendarTop>\r\n        <tbody>\r\n          <CalendarHead>\r\n            <td>{wdate.getWeekdayShort(7)}</td>\r\n            <td>{wdate.getWeekdayShort(1)}</td>\r\n            <td>{wdate.getWeekdayShort(2)}</td>\r\n            <td>{wdate.getWeekdayShort(3)}</td>\r\n            <td>{wdate.getWeekdayShort(4)}</td>\r\n            <td>{wdate.getWeekdayShort(5)}</td>\r\n            <td>{wdate.getWeekdayShort(6)}</td>\r\n          </CalendarHead>\r\n          {divideArrayToCalendar(pushIntoArray())}\r\n        </tbody>\r\n      </CalendarWrap>\r\n    );\r\n  }\r\n);\r\n"],"names":["wdate"],"mappings":"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"}