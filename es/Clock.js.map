{"version":3,"file":"Clock.js","sources":["../components/Clock.tsx"],"sourcesContent":["/**\r\n * @prop {string} selected\r\n * @prop {(time: [number, number]) => void} fnSelected\r\n */\r\n\r\nimport React, { useCallback, useEffect, useState } from \"react\";\r\nimport { borderRadius, boxShadow, fontSize, space, zIndex } from \"css/base\";\r\n\r\nimport Icon from \"components/atoms/Icon\";\r\nimport clock_face from \"assets/images/clock-face.svg\";\r\nimport generatedId from \"helps/generatedId\";\r\nimport styled from \"styled-components\";\r\nimport transition from \"css/transition\";\r\nimport wdate from \"w-date\";\r\n\r\ninterface Props {\r\n  selected?: string | Date; // 'HH:MM || date'\r\n  fnSelected?: (time: [number, number]) => void; // function when selected time\r\n}\r\nexport default React.memo(({ selected, fnSelected }: Props) => {\r\n  const [minute, setMinute] = useState(0);\r\n  const [hour, setHour] = useState(0);\r\n\r\n  /**\r\n   * @param _hour\r\n   */\r\n  const changeHour = useCallback(\r\n    (_hour: number) => {\r\n      setHour(_hour);\r\n      fnSelected?.([_hour, minute]);\r\n    },\r\n    [fnSelected, minute]\r\n  );\r\n\r\n  /**\r\n   * @param _minute\r\n   */\r\n  const changeMinute = useCallback(\r\n    (_minute: number) => {\r\n      setMinute(_minute);\r\n      fnSelected?.([hour, _minute]);\r\n    },\r\n    [fnSelected, hour]\r\n  );\r\n\r\n  /**\r\n   * TODO\r\n   * Set value\r\n   */\r\n  const setValue = useCallback(\r\n    (val: number, max: MaxTime) => {\r\n      if (max === 23) {\r\n        if (val === -1) changeHour(max);\r\n        else if (val === max + 1) changeHour(1);\r\n        else changeHour(val);\r\n      } else {\r\n        if (val === -1) changeMinute(max);\r\n        else if (val === max + 1) changeMinute(1);\r\n        else changeMinute(val);\r\n      }\r\n    },\r\n    [changeHour, changeMinute]\r\n  );\r\n\r\n  /**\r\n   * Print list\r\n   * @param {number} val\r\n   * @param {60| 24} max\r\n   */\r\n  const lists = useCallback(\r\n    (val = 1, max: MaxTime) => {\r\n      const id = generatedId(\"list\");\r\n      const arr: any[] = []; // contains list elements\r\n      const start = val - 2 >= 0 ? val - 2 : 0;\r\n      const _max = val + 2 <= max ? val + 2 : max;\r\n\r\n      // Previous time\r\n      if (val < 3) {\r\n        for (let index = max + val - 1; index <= max; index++) {\r\n          arr.push(\r\n            <li key={`${id}-${index}`} onClick={() => setValue(index, max)}>\r\n              {index < 10 ? `0${index}` : index}\r\n            </li>\r\n          );\r\n        }\r\n      }\r\n\r\n      /** Push time */\r\n      for (let index = start; index <= _max; index++) {\r\n        if (index === val)\r\n          arr.push(\r\n            <ClockTimeListsValue key={`${id}-${index}`}>\r\n              {index < 10 ? `0${index}` : index}\r\n            </ClockTimeListsValue>\r\n          );\r\n        else\r\n          arr.push(\r\n            <li key={`${id}-${index}`} onClick={() => setValue(index, max)}>\r\n              {index < 10 ? `0${index}` : index}\r\n            </li>\r\n          );\r\n      }\r\n\r\n      // Previous time\r\n      if (val > max - 2) {\r\n        for (let index = 0; index <= val + 1 - max; index++) {\r\n          arr.push(\r\n            <li key={`${id}-${index}`} onClick={() => setValue(index, max)}>\r\n              {index < 10 ? `0${index}` : index}\r\n            </li>\r\n          );\r\n        }\r\n      }\r\n\r\n      /**\r\n       * TODO\r\n       * Add arrow change list\r\n       */\r\n      arr.unshift(\r\n        <div key={`${id}-up`} onClick={() => setValue(val - 1, max)}>\r\n          <Icon icon=\"i-arrow-up\" small />\r\n        </div>\r\n      );\r\n\r\n      arr.push(\r\n        <div key={`${id}-down`} onClick={() => setValue(val + 1, max)}>\r\n          <Icon icon=\"i-arrow-down\" small />\r\n        </div>\r\n      );\r\n\r\n      return <>{arr.map((item: any) => item)}</>;\r\n    },\r\n    [setValue]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (!selected) return;\r\n\r\n    if (typeof selected === \"string\") {\r\n      const _time = selected.split(\":\");\r\n      setMinute(+_time[1] || 0);\r\n      setHour(+_time[0] || 0);\r\n    } else {\r\n      const _time: Date = selected ? wdate.identifyDate(selected) : wdate.now();\r\n      setMinute(_time.getMinutes());\r\n      setHour(_time.getHours());\r\n    }\r\n  }, [selected]);\r\n\r\n  return (\r\n    <ClockWrap>\r\n      <input type=\"hidden\" />\r\n      <ClockAnalog minutes={minute} hours={hour % 12}>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n      </ClockAnalog>\r\n      <ClockTime>\r\n        <ClockTimeItem>\r\n          <ClockTimeValue>{hour < 10 ? `0${hour}` : hour}</ClockTimeValue>\r\n          <ClockTimeLists>{lists(hour, 23)}</ClockTimeLists>\r\n        </ClockTimeItem>\r\n        <span> : </span>\r\n        <ClockTimeItem>\r\n          <ClockTimeValue>{minute < 10 ? `0${minute}` : minute}</ClockTimeValue>\r\n          <ClockTimeLists>{lists(minute, 59)}</ClockTimeLists>\r\n        </ClockTimeItem>\r\n      </ClockTime>\r\n    </ClockWrap>\r\n  );\r\n});\r\n\r\nconst ClockWrap = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n\r\ninterface Time {\r\n  hours: number;\r\n  minutes: number;\r\n}\r\nconst ClockAnalog = styled.div<Time>`\r\n  background-image: url(${clock_face});\r\n  background-size: cover;\r\n  border-radius: 50%;\r\n  height: 200px;\r\n  position: relative;\r\n  width: 200px;\r\n\r\n  div:first-of-type {\r\n    background-color: var(--dark);\r\n    height: 20%;\r\n    left: calc(50% - 1px);\r\n    position: absolute;\r\n    top: 30%;\r\n    transform-origin: calc(100% - 1px) calc(100% - 1px);\r\n    transform: ${(props) =>\r\n      `rotate(${props.hours * 30 + props.minutes * 0.5}deg)`};\r\n    width: 2px;\r\n  }\r\n\r\n  div:last-of-type {\r\n    background-color: var(--dark);\r\n    height: 30%;\r\n    left: calc(50% - 0.5px);\r\n    position: absolute;\r\n    top: 20%;\r\n    transform-origin: calc(100% - 0.5px) calc(100% - 0.5px);\r\n    transform: ${(props) => `rotate(${props.minutes * 6}deg)`};\r\n    width: 1px;\r\n  }\r\n\r\n  div:nth-of-type(2) {\r\n    background-color: var(--dark);\r\n    border-radius: 50%;\r\n    height: 5px;\r\n    left: 50%;\r\n    position: absolute;\r\n    top: 50%;\r\n    transform: translate(-50%, -50%);\r\n    width: 5px;\r\n  }\r\n`;\r\n\r\nconst ClockTimeItem = styled.div`\r\n  position: relative;\r\n`;\r\n\r\nconst ClockTimeValue = styled.div`\r\n  ${fontSize.big};\r\n  ${space.P4.x};\r\n  ${space.P2.y};\r\n  cursor: pointer;\r\n`;\r\n\r\nconst ClockTimeLists = styled.ul`\r\n  background-color: var(--backgroundContent);\r\n  height: auto;\r\n  left: 0;\r\n  position: absolute;\r\n  text-align: center;\r\n  top: -337%;\r\n  transform: scaleY(0);\r\n  transition-property: transform;\r\n  width: 100%;\r\n  ${transition.linear};\r\n  ${borderRadius.normal};\r\n  ${space.P1.a};\r\n  ${zIndex.front_5};\r\n  ${boxShadow.normal};\r\n\r\n  & > li {\r\n    cursor: pointer;\r\n    display: flex;\r\n    height: 100%;\r\n    justify-content: space-around;\r\n    list-style: none;\r\n    user-select: none;\r\n    width: 100%;\r\n    ${space.P2.a};\r\n    ${space.M1.y};\r\n    &:hover {\r\n      background-color: var(--backgroundOpacity);\r\n    }\r\n  }\r\n\r\n  & > div {\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nconst ClockTimeListsValue = styled.div`\r\n  background-color: var(--default);\r\n  cursor: pointer;\r\n  height: 30px;\r\n  left: 50%;\r\n  line-height: 30px;\r\n  position: relative;\r\n  transform: translate(-50%, 0);\r\n  width: 150%;\r\n  ${borderRadius.normal};\r\n`;\r\n\r\nconst ClockTime = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  ${space.M3.t};\r\n\r\n  span {\r\n    ${space.M2.x};\r\n  }\r\n\r\n  &:hover ${ClockTimeLists} {\r\n    transform: scaleY(1);\r\n  }\r\n`;\r\n\r\ntype MaxTime = 23 | 59;\r\n"],"names":["wdate","fontSize.big","space.P4","space.P2","borderRadius.normal","space.P1","zIndex.front_5","boxShadow.normal","space.M1","space.M3","space.M2"],"mappings":"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"}