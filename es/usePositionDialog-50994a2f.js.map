{"version":3,"file":"usePositionDialog-50994a2f.js","sources":["../components/_util/hooks/usePositionDialog.ts"],"sourcesContent":["import { RefObject, useCallback, useMemo } from 'react';\r\n\r\nimport { TPosition } from 'util/type';\r\n\r\ninterface IOptions {\r\n  add?: {\r\n    height?: number\r\n    width?: number,\r\n  };\r\n  position?: TPosition[];\r\n}\r\n\r\nfunction usePositionPortal<T extends HTMLElement>(ref: RefObject<T>, refParent: RefObject<any>, options: IOptions = {\r\n  add: {\r\n    width: 0,\r\n    height: 0\r\n  },\r\n  position: []\r\n}) {\r\n\r\n  // Get position of screen\r\n  const pScreen = useMemo(() => {\r\n    return {\r\n      x: 0,\r\n      y: 0,\r\n      height: window.innerHeight,\r\n      width: window.innerWidth,\r\n    };\r\n  }, []);\r\n\r\n  const _calPositionOfRef = useCallback((x: number, y: number) => {\r\n    const p = ref.current.getBoundingClientRect();\r\n\r\n    return {\r\n      bottom: p.bottom + y,\r\n      height: p.height,\r\n      left: p.left + x,\r\n      right: p.right + x,\r\n      top: p.top + y,\r\n      width: p.width,\r\n      x: p.x + x,\r\n      y: p.y + y\r\n    };\r\n  }, [ref]);\r\n\r\n  const _handlePosition = useCallback(() => {\r\n    let translateY = 0,\r\n      translateX = 0,\r\n      transformOriginX: string,\r\n      transformOriginY: string;\r\n\r\n    const pParent = refParent.current.getBoundingClientRect();\r\n    let pElement = _calPositionOfRef(translateX, translateY);\r\n\r\n    /**\r\n     * Set default position of element\r\n     */\r\n    if (options.position.indexOf('top') >= 0) {\r\n      translateY = pParent.top - pElement.height;\r\n    } else {\r\n      translateY = pParent.bottom;\r\n    }\r\n\r\n    if (options.position.indexOf('right') >= 0) {\r\n      translateX = pParent.right - pElement.width;\r\n    } else {\r\n      translateX = pParent.left;\r\n    }\r\n\r\n    // Cal again position of element to continue calculating position\r\n    pElement = _calPositionOfRef(translateX, translateY);\r\n\r\n    /**\r\n     * Set case is overload\r\n     */\r\n    // Cal again position of Element\r\n    // When it is more than height of screen\r\n    if (pElement.bottom > (pScreen.height - 10)) {\r\n      translateY += -(pElement.height + pParent.height);\r\n    }\r\n\r\n    // Cal again position of element to continue calculating position\r\n    pElement = _calPositionOfRef(translateX, translateY);\r\n\r\n    // When it is more than width of screen\r\n    if (pElement.right > (pScreen.width - 10)) {\r\n      translateX += -(pElement.width - (pParent.width));\r\n    }\r\n\r\n    ref.current.style.top = translateY + 'px';\r\n    ref.current.style.left = translateX + 'px';\r\n    ref.current.style.transformOrigin = `${transformOriginX} ${transformOriginY}`;\r\n    ref.current.style.visibility = 'visible';\r\n  }, [_calPositionOfRef, options.position, pScreen.height, pScreen.width, ref, refParent]);\r\n\r\n  return {\r\n    handlePosition: _handlePosition\r\n  };\r\n}\r\n\r\nexport default usePositionPortal;\r\n"],"names":[],"mappings":"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"}