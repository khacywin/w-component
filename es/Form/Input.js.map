{"version":3,"file":"Input.js","sources":["../../components/Form/Input.tsx"],"sourcesContent":["/**\r\n * @prop {string} label\r\n * @prop {'text' | 'number' | 'email' | 'password'} type\r\n */\r\n\r\nimport React, {\r\n  ChangeEvent,\r\n  SyntheticEvent,\r\n  useCallback,\r\n  useEffect,\r\n  useState,\r\n} from 'react';\r\n\r\nimport FormGroup from 'components/atoms/Form/_FormGroup';\r\nimport InputStyle from 'css/elements/InputStyle';\r\nimport { TInput } from 'util/type';\r\nimport WColor from 'w-color-selector';\r\nimport _t from 'helps/language/_t';\r\nimport generatedId from 'helps/generatedId';\r\nimport { space } from 'css/base';\r\nimport styled from 'styled-components';\r\n\r\n/** Interface */\r\nexport interface Props {\r\n  defaultValue?: string | number;\r\n  disabled?: boolean;\r\n  fnChange?: (val: any) => void;\r\n  isInputTitle?: boolean;\r\n  label?: string;\r\n  name?: string;\r\n  placeholder?: string;\r\n  style?: React.CSSProperties;\r\n  type: TInput;\r\n  value?: any;\r\n}\r\n\r\n/** Component */\r\nexport default React.memo(\r\n  ({\r\n    fnChange,\r\n    isInputTitle,\r\n    label,\r\n    name,\r\n    placeholder,\r\n    style,\r\n    type = 'text',\r\n    value = '',\r\n    ...props\r\n  }: Props) => {\r\n    const id = generatedId('input');\r\n    const [error, setError] = useState<any>();\r\n    const [color, setColor] = useState('');\r\n    const [valState, setValState] = useState('');\r\n\r\n    const handleInvalid = useCallback(\r\n      (e: SyntheticEvent<HTMLInputElement>) => {\r\n        e.preventDefault();\r\n        e.persist();\r\n\r\n        setError({\r\n          type: 'manual',\r\n          message: e.currentTarget.required ? _t('Field is required !!') : '',\r\n        });\r\n      },\r\n      []\r\n    );\r\n\r\n    const onChange = useCallback(\r\n      (e: ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n        const value = type === 'number' ? +e.target.value : e.target.value;\r\n        setValState(e.target.value);\r\n        fnChange?.(value || color);\r\n      },\r\n      [type, fnChange, color]\r\n    );\r\n\r\n    const onChangeColor = useCallback(\r\n      (col: string) => {\r\n        setColor(col);\r\n        fnChange?.(col);\r\n      },\r\n      [fnChange]\r\n    );\r\n\r\n    useEffect(() => {\r\n      value && setValState(value);\r\n    }, [value]);\r\n\r\n    const inputs = new Map()\r\n      .set(\r\n        'textarea',\r\n        <TextareaControl\r\n          className='w-textarea'\r\n          name={name}\r\n          placeholder={placeholder}\r\n          id={id}\r\n          {...(fnChange && {\r\n            value: valState,\r\n            onChange: onChange,\r\n          })}\r\n          {...props}\r\n        />\r\n      )\r\n      .set(\r\n        'text',\r\n        <InputControl\r\n          name={name}\r\n          className='w-input'\r\n          type='text'\r\n          placeholder={placeholder}\r\n          id={id}\r\n          onInvalid={handleInvalid}\r\n          {...(fnChange && {\r\n            value: valState,\r\n            onChange: onChange,\r\n          })}\r\n          {...props}\r\n        />\r\n      )\r\n      .set(\r\n        'password',\r\n        <InputControl\r\n          name={name}\r\n          className='w-input'\r\n          type='password'\r\n          placeholder={placeholder}\r\n          id={id}\r\n          onInvalid={handleInvalid}\r\n          {...(fnChange && {\r\n            value: valState,\r\n            onChange: onChange,\r\n          })}\r\n          {...props}\r\n        />\r\n      )\r\n      .set(\r\n        'email',\r\n        <InputControl\r\n          name={name}\r\n          className='w-input'\r\n          type='email'\r\n          placeholder={placeholder}\r\n          id={id}\r\n          onInvalid={handleInvalid}\r\n          {...(fnChange && {\r\n            value: valState,\r\n            onChange: onChange,\r\n          })}\r\n          {...props}\r\n        />\r\n      )\r\n      .set(\r\n        'number',\r\n        <InputControl\r\n          name={name}\r\n          className='w-input'\r\n          type='number'\r\n          placeholder={placeholder}\r\n          id={id}\r\n          onInvalid={handleInvalid}\r\n          {...(fnChange && {\r\n            value: valState,\r\n            onChange: onChange,\r\n          })}\r\n          {...props}\r\n        />\r\n      )\r\n      .set(\r\n        'color',\r\n        <div>\r\n          <WColor\r\n            width={20}\r\n            height={20}\r\n            onChange={fnChange ? onChangeColor : setColor}\r\n            defaultValue={value || color || '#54478c'}\r\n          />\r\n          <input\r\n            type='hidden'\r\n            name={name}\r\n            value={color || value || '#54478c'}\r\n          />\r\n        </div>\r\n      );\r\n\r\n    return (\r\n      <FormGroup\r\n        isInputTitle={isInputTitle}\r\n        style={style}\r\n        label={label}\r\n        isFocus={value || placeholder}\r\n        id={id}\r\n        inline={type === 'color'}\r\n        error={error}\r\n      >\r\n        {inputs.get(type)}\r\n      </FormGroup>\r\n    );\r\n  }\r\n);\r\n\r\n/** Style */\r\nconst InputControl = styled.input`\r\n  ${InputStyle};\r\n`;\r\n\r\nconst TextareaControl = styled.textarea`\r\n  ${InputStyle};\r\n  ${space.P2.a};\r\n  resize: none;\r\n`;\r\n"],"names":["WColor","space.P2"],"mappings":"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"}