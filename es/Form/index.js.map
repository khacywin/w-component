{"version":3,"file":"index.js","sources":["../../components/Form/index.tsx"],"sourcesContent":["import React, { HTMLAttributes, useCallback, useEffect, useRef } from \"react\";\r\n\r\nimport { IObject } from \"util/type\";\r\n\r\n/**\r\n * HOOK FORM\r\n */\r\nexport interface IUserForm {\r\n  ref: React.MutableRefObject<IObject>;\r\n  // setValues?: (value: IObject) => void,\r\n  // setValue?: (key: string, value: any) => void,\r\n  getValues?: () => IObject;\r\n}\r\nexport function useForm(): IUserForm {\r\n  const ref = useRef<IObject>({});\r\n\r\n  const getValues = useCallback(() => {\r\n    const value: IObject = {};\r\n    Object.keys(ref.current).map((key) => {\r\n      value[key] = ref.current[key].value;\r\n    });\r\n\r\n    return value;\r\n  }, []);\r\n\r\n  return {\r\n    ref,\r\n    // setValues,\r\n    // setValue,\r\n    getValues,\r\n  };\r\n}\r\n\r\n/**\r\n * COMPONENT FORM\r\n */\r\nexport interface IFormRefProps extends HTMLAttributes<HTMLFormElement> {\r\n  children: JSX.Element[];\r\n  form: IUserForm;\r\n  onFinish?: (data: IObject) => void;\r\n}\r\nexport default function Form({\r\n  children,\r\n  form: formRef,\r\n  onChange,\r\n  onFinish,\r\n  ...props\r\n}: IFormRefProps) {\r\n  // Change form\r\n  const handleChangeForm = (name?: string) => (e: any) => {\r\n    const _name = name || e.target.name;\r\n    if (typeof e === \"object\" && !Array.isArray(e)) {\r\n      if (!Object.keys(formRef.ref.current).includes(_name)) return;\r\n      onChange?.(e);\r\n      formRef.ref.current[_name].value = e.currentTarget[_name].value;\r\n    } else {\r\n      formRef.ref.current[_name].value = e;\r\n    }\r\n  };\r\n\r\n  // Handle submit\r\n  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    props.onSubmit?.(e);\r\n\r\n    const value: IObject = {};\r\n    Object.keys(formRef.ref.current).map((key) => {\r\n      value[key] = formRef.ref.current[key].value;\r\n    });\r\n\r\n    onFinish?.(value);\r\n  };\r\n\r\n  // Constructor for form\r\n  useEffect(() => {\r\n    children.forEach((ele) => {\r\n      formRef.ref.current[ele.props.name] = { value: ele.props.defaultValue };\r\n    });\r\n  }, [children, formRef]);\r\n\r\n  return (\r\n    <form {...props} onChange={handleChangeForm()} onSubmit={handleSubmit}>\r\n      {children.map((ele, idx) =>\r\n        React.cloneElement(\r\n          ele,\r\n          ![\"textarea\", \"text\", \"password\", \"email\", \"number\"].includes(\r\n            ele.props.type\r\n          )\r\n            ? {\r\n                key: idx,\r\n                value:\r\n                  formRef.ref.current?.[ele.props.name]?.value ||\r\n                  ele.props.defaultValue,\r\n                fnChange: handleChangeForm(ele.props.name),\r\n              }\r\n            : {\r\n                key: idx,\r\n              }\r\n        )\r\n      )}\r\n    </form>\r\n  );\r\n}\r\n\r\n/**\r\n * COMPONENT FORM CONTROL\r\n */\r\nexport function FormControl() {\r\n  return <div></div>;\r\n}\r\n"],"names":[],"mappings":"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"}