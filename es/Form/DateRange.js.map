{"version":3,"file":"DateRange.js","sources":["../../components/Form/DateRange.tsx"],"sourcesContent":["import { LabelCss, cssFocus } from \"./_FormGroup\";\r\nimport React, { useCallback, useMemo } from \"react\";\r\n\r\nimport DatePicker from \"./DatePicker\";\r\nimport Icon from \"../Icon\";\r\nimport { WDate } from \"util/type\";\r\nimport dayjs from \"dayjs\";\r\nimport styled from \"styled-components\";\r\n\r\nexport interface IDateRangeProps {\r\n  fnChange?: (val: any) => void;\r\n  label?: string;\r\n  name?: string;\r\n  picker?: \"year\" | \"month\" | \"date\";\r\n  defaultValue?: {\r\n    from?: WDate;\r\n    to?: WDate;\r\n  };\r\n  value?: {\r\n    from?: WDate;\r\n    to?: WDate;\r\n  };\r\n}\r\n\r\nexport default function DateRange({\r\n  fnChange,\r\n  label,\r\n  picker = \"date\",\r\n  value = {},\r\n  defaultValue = {},\r\n}: IDateRangeProps) {\r\n  const format: any = useMemo(() => {\r\n    switch (picker) {\r\n      case \"date\":\r\n        return \"DD MMM, YYYY\";\r\n\r\n      case \"month\":\r\n        return \"MMM, YYYY\";\r\n\r\n      case \"year\":\r\n        return \"YYYY\";\r\n\r\n      default:\r\n        break;\r\n    }\r\n\r\n    return \"DD MMM, YYYY\";\r\n  }, [picker]);\r\n\r\n  const disablePrevious = useCallback(\r\n    (date: string | Date) => {\r\n      const _date = dayjs(date);\r\n\r\n      return value.from\r\n        ? _date.isBefore(dayjs(value.from))\r\n        : defaultValue.from\r\n        ? _date.isBefore(dayjs(defaultValue.from))\r\n        : false;\r\n    },\r\n    [defaultValue.from, value.from]\r\n  );\r\n\r\n  const disableNext = useCallback(\r\n    (date: string | Date) => {\r\n      const _date = dayjs(date);\r\n\r\n      return value.to\r\n        ? _date.isAfter(dayjs(value.to))\r\n        : defaultValue.to\r\n        ? _date.isAfter(dayjs(defaultValue.to))\r\n        : false;\r\n    },\r\n    [defaultValue.to, value.to]\r\n  );\r\n\r\n  const onChangeFrom = (_val: string) => {\r\n    let valTemp: any = _val;\r\n    if (disableNext(_val)) valTemp = value.to;\r\n\r\n    fnChange({\r\n      from: valTemp,\r\n      to: value.to,\r\n    });\r\n  };\r\n\r\n  const onChangeTo = (_val: string) => {\r\n    let valTemp: any = _val;\r\n    if (disablePrevious(_val)) valTemp = value.from;\r\n\r\n    fnChange({\r\n      from: value.from,\r\n      to: valTemp,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Wrap className=\"date-range\">\r\n      <Label>{label}</Label>\r\n      <DatePicker\r\n        picker={picker}\r\n        value={value.from}\r\n        defaultValue={defaultValue.from}\r\n        fnChange={onChangeFrom}\r\n        format={format}\r\n        isRemove={false}\r\n        disableItem={disableNext}\r\n      />\r\n      <span>\r\n        <Icon icon=\"i-transfer\" />\r\n      </span>\r\n      <DatePicker\r\n        picker={picker}\r\n        value={value.to}\r\n        defaultValue={defaultValue.to}\r\n        fnChange={onChangeTo}\r\n        format={format}\r\n        isRemove={false}\r\n        disableItem={disablePrevious}\r\n      />\r\n    </Wrap>\r\n  );\r\n}\r\n\r\nconst Wrap = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-top: 15px;\r\n  position: relative;\r\n\r\n  & > div {\r\n    width: calc(50% - 20px);\r\n  }\r\n\r\n  .form-group {\r\n    margin-top: 0;\r\n  }\r\n`;\r\n\r\nconst Label = styled.div`\r\n  ${LabelCss};\r\n  ${cssFocus};\r\n`;\r\n"],"names":["dayjs"],"mappings":"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"}